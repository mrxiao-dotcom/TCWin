# 🎯 币安期货交易器 - 条件单功能说明文档

## 📋 概述

本交易器的条件单专门用于**开仓**和**加仓**操作，基于价格突破逻辑。当市场价格向上突破指定价格时自动执行买入/卖出操作。

**重要说明**：条件单不用于止损减仓，止损功能已集成在主下单功能中。

---

## 🔵 标准条件单 (Standard Conditional Orders)

### 📝 功能描述
标准条件单用于**开仓**或**加仓**操作，当市场价格向上突破指定触发价格时自动执行订单。

### ⚙️ 设置参数

| 参数 | 说明 | 选项/格式 |
|------|------|-----------|
| **条件类型** | 订单类型 | `TAKE_PROFIT_MARKET` (向上突破) |
| **触发价格** | 价格突破条件 | 手动输入或点击"填充"按钮自动填充 |
| **数量** | 交易数量 | 自动使用主下单区的数量设置 |
| **触发方式** | 价格参考标准 | 合约价 / 标记价 |
| **杠杆** | 杠杆倍数 | 自动使用主下单区的杠杆设置 |
| **方向** | 交易方向 | 自动使用主下单区的方向设置 |

### 🎯 使用场景

#### **1. 做多开仓单**
```
场景：等待BTC突破阻力位46000时开仓做多
设置：
- 条件类型：TAKE_PROFIT_MARKET
- 触发价格：46000 (高于当前价)
- 方向：BUY (买入开仓)
```

#### **2. 做空开仓单**
```
场景：等待BTC突破阻力位后回落，在47000做空
设置：
- 条件类型：TAKE_PROFIT_MARKET
- 触发价格：47000 (高于当前价)
- 方向：SELL (卖出开仓)
```

#### **3. 做多加仓单**
```
场景：已有BTC多头持仓，等待突破关键阻力位时加仓
设置：
- 条件类型：TAKE_PROFIT_MARKET
- 触发价格：48000 (高于当前价和原持仓价)
- 方向：BUY (买入加仓)
```

#### **4. 做空加仓单**
```
场景：已有BTC空头持仓，等待反弹到阻力位时加仓
设置：
- 条件类型：TAKE_PROFIT_MARKET
- 触发价格：46000 (高于当前价)
- 方向：SELL (卖出加仓)
```

### ✅ 优点
- **突破逻辑清晰**：基于价格向上突破的经典交易策略
- **开仓加仓并重**：既可用于新开仓位，也可用于增加现有仓位
- **设置简单**：直接指定突破价格即可

### ⚠️ 注意事项
- 触发价格必须**高于当前市价**，体现突破逻辑
- 适合趋势跟踪和突破策略，不适合逆势操作
- 需要合理设置触发价格，避免追高风险

---

## 🟠 浮盈加仓条件单 (Profit-Based Add Position Orders)

### 📝 功能描述
浮盈加仓条件单是专门用于**加仓**的智能条件单，根据现有持仓的浮盈目标自动计算突破价格，在持仓盈利达到预期时进行加仓操作。

### ⚙️ 设置参数

| 参数 | 说明 | 选项/格式 |
|------|------|-----------|
| **选择持仓** | 目标持仓 | 下拉选择当前持有的合约 |
| **目标浮盈** | 期望的盈利金额 | 输入USDT金额，必须**大于当前浮盈** |
| **当前浮盈** | 实时盈亏显示 | 自动计算显示，红绿颜色区分 |
| **计算价格** | 自动计算的突破价 | 点击"计算价格"按钮自动计算 |
| **条件类型** | 订单类型 | `TAKE_PROFIT_MARKET` (向上突破加仓) |

### 🧮 智能计算逻辑

#### **多头持仓加仓计算公式**
```
突破价格 = 开仓价 + (目标浮盈 ÷ 持仓数量)
条件：突破价格 > 当前市价 且 目标浮盈 > 当前浮盈
```

#### **空头持仓加仓计算公式**  
```
突破价格 = 开仓价 + (目标浮盈 ÷ 持仓数量)
说明：空头在价格上涨时浮盈减少，在反弹高点加仓
条件：突破价格 > 当前市价 且 目标浮盈 > 当前浮盈
```

### 🎯 使用场景

#### **1. 多头盈利加仓**
```
场景：BTC多头持仓已盈利50U，希望盈利100U时加仓
操作：
1. 选择持仓：BTCUSDT多头
2. 目标浮盈：100 (大于当前浮盈50U)
3. 点击"计算价格" → 系统计算突破加仓价
4. 条件类型：TAKE_PROFIT_MARKET
5. 方向：自动设置为BUY(买入加仓)
6. 下单
```

#### **2. 空头反弹加仓**
```
场景：BTC空头持仓已盈利100U，希望反弹时在盈利150U的价位加仓
操作：
1. 选择持仓：BTCUSDT空头
2. 目标浮盈：150 (大于当前浮盈100U)
3. 计算价格 → 得到反弹加仓价位
4. 条件类型：TAKE_PROFIT_MARKET
5. 方向：自动设置为SELL(卖出加仓)
6. 下单
```

#### **3. 分级加仓策略**
```
场景：分批在不同盈利水平加仓，摊薄成本
操作：
1. 第一次：目标浮盈50U时加仓
2. 第二次：目标浮盈100U时加仓  
3. 第三次：目标浮盈200U时加仓
4. 形成分级加仓体系
```

### ✅ 优点
- **趋势加仓**：在盈利趋势中增加仓位，放大收益
- **自动计算**：无需手动计算复杂的加仓价格
- **风险递减**：基于已有盈利加仓，降低新增风险
- **策略明确**：明确的盈利目标和加仓逻辑

### ⚠️ 注意事项
- **仅用于加仓**：必须先有对应的持仓
- **目标浮盈必须大于当前浮盈**：确保是向上突破逻辑
- **计算价格必须大于当前市价**：符合突破加仓逻辑
- **合理设置目标**：避免过于激进的加仓策略

---

## 🔄 两种条件单的核心区别

| 对比维度 | 标准条件单 | 浮盈加仓条件单 |
|----------|------------|------------|
| **适用场景** | 开仓 + 加仓 | 仅加仓 |
| **价格设置** | 手动输入突破价格 | 基于浮盈自动计算突破价 |
| **使用前提** | 无需持仓 | 必须先有对应持仓 |
| **价格方向** | 必须高于当前市价 | 必须高于当前市价 |
| **策略类型** | 技术分析突破 | 趋势跟随加仓 |
| **风险特征** | 开仓风险 | 加仓风险（相对较低） |

---

## 🎯 最佳实践建议

### 📈 **标准条件单适用于：**
- **技术突破开仓**：基于支撑阻力位的突破开仓
- **趋势跟随开仓**：跟随市场趋势方向开仓
- **关键位置加仓**：在重要技术位置增加仓位
- **分批建仓**：在不同价位分批建立仓位

### 💰 **浮盈加仓条件单适用于：**
- **趋势加仓**：在有利趋势中增加仓位
- **盈利放大**：利用已有盈利加大仓位规模
- **分级加仓**：按盈利水平分批加仓
- **动态仓位管理**：根据盈利情况动态调整仓位

---

## 🛠️ 操作流程

### 标准条件单操作流程
1. 在主下单区设置合约、数量、杠杆、方向等基础参数
2. 点击"条件单"按钮显示条件单设置区
3. 选择"标准"条件单类型
4. 设置触发价格（必须高于当前市价）
5. 选择触发方式（合约价/标记价）
6. 点击"下标准条件单"

### 浮盈加仓条件单操作流程
1. 确保已有要加仓的持仓
2. 点击"条件单"按钮显示条件单设置区
3. 选择"浮盈"条件单类型
4. 选择目标持仓
5. 输入目标浮盈金额（必须大于当前浮盈）
6. 点击"计算价格"查看突破价格
7. 确认突破价格大于当前市价
8. 点击"下浮盈条件单"

---

## 📊 监控和管理

### 条件单监控功能
- **实时状态**：显示所有条件单的当前状态
- **批量操作**：支持全选、反选、批量撤销
- **详细信息**：显示合约、类型、方向、触发价、状态等

### 管理操作
- **全选/反选**：快速选择条件单
- **撤销**：取消选中的条件单
- **状态监控**：实时查看条件单执行状态

---

## ⚡ 总结

条件单系统专注于**开仓**和**加仓**操作，基于价格向上突破的交易逻辑：

- **标准条件单**：适合基于技术分析的突破开仓和加仓
- **浮盈加仓条件单**：适合基于盈利状况的趋势加仓

两种条件单都遵循**向上突破**的原则，确保在价格强势时进行开仓或加仓操作，符合趋势跟随的交易理念。

**核心理念**：在趋势确认后进场，在盈利趋势中加仓，通过条件单实现自动化的仓位管理。 