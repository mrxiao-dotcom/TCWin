# 条件单功能使用说明

## 功能概述

条件单功能允许您设置基于价格突破或持仓浮盈的自动交易订单。系统提供两种类型的条件单：

### 1. 标准条件单
- **用途**: 基于价格突破的条件单
- **特点**: 当合约价格向上或向下突破设定价格时自动执行
- **适用场景**: 突破交易、追涨杀跌、自动开仓等

### 2. 浮盈条件单
- **用途**: 基于持仓浮盈触发的条件单
- **特点**: 当持仓浮盈达到目标值时自动执行
- **适用场景**: 止盈保护、利润锁定等

## 使用方法

### 打开条件单设置
1. 在下单区域点击"条件单"按钮
2. 条件单设置面板将展开显示

### 标准条件单设置

#### 基本参数
- **条件类型**: 选择条件单类型
  - `STOP_MARKET`: 止损市价单
  - `TAKE_PROFIT_MARKET`: 止盈市价单
  - `STOP`: 止损限价单
  - `TAKE_PROFIT`: 止盈限价单

- **触发价格**: 设置条件单的触发价格
- **执行价格**: 限价单需要设置的执行价格（仅限价条件单）
- **数量**: 条件单的交易数量
- **杠杆**: 条件单使用的杠杆倍数
- **方向**: 买入或卖出
- **触发方式**: 
  - `合约价`: 使用合约价格触发
  - `标记价`: 使用标记价格触发

#### 操作步骤
1. 选择"标准条件单"
2. 设置条件类型（如STOP_MARKET）
3. 输入触发价格
4. 输入交易数量
5. 设置杠杆倍数
6. 选择交易方向
7. 点击"下条件单"按钮

### 浮盈条件单设置

#### 基本参数
- **选择持仓**: 从现有持仓中选择要设置条件单的合约
- **目标浮盈**: 输入目标浮盈金额（USDT）
- **当前浮盈**: 显示选中持仓的当前浮盈
- **计算价格**: 系统自动计算的触发价格
- **条件类型**: 
  - `STOP_MARKET`: 止损市价单
  - `TAKE_PROFIT_MARKET`: 止盈市价单

#### 操作步骤
1. 选择"浮盈条件单"
2. 从下拉列表选择要设置的持仓
3. 输入目标浮盈金额
4. 点击"计算价格"按钮
5. 系统会自动计算触发价格
6. 选择条件类型
7. 点击"下浮盈单"按钮

## 计算逻辑

### 浮盈价格计算公式

**做多持仓**:
```
目标价格 = 进场价格 + (目标浮盈 / 持仓数量)
```

**做空持仓**:
```
目标价格 = 进场价格 - (目标浮盈 / 持仓数量)
```

### 示例

假设您有一个BTC做多持仓：
- 进场价格: 50,000 USDT
- 持仓数量: 0.1 BTC
- 目标浮盈: 500 USDT

计算：
```
目标价格 = 50,000 + (500 / 0.1) = 50,000 + 5,000 = 55,000 USDT
```

当BTC价格达到55,000 USDT时，浮盈将达到500 USDT。

## 注意事项

### 标准条件单
1. **价格设置**: 确保触发价格合理，避免立即触发
2. **数量限制**: 遵守交易所的最小/最大数量限制
3. **杠杆设置**: 确保账户有足够保证金支持设定杠杆
4. **方向选择**: 
   - 突破做多：选择"买入"
   - 突破做空：选择"卖出"

### 浮盈条件单
1. **持仓要求**: 必须先有持仓才能设置浮盈条件单
2. **目标浮盈**: 应设置合理的目标，不要过于激进
3. **方向一致**: 浮盈条件单方向与原持仓方向相同
4. **价格监控**: 系统会持续监控价格变化

### 风险提示
1. **市场波动**: 条件单可能在市场剧烈波动时以不理想价格成交
2. **滑点风险**: 市价单可能存在滑点
3. **网络风险**: 网络中断可能影响条件单执行
4. **资金管理**: 合理设置条件单数量，避免过度杠杆

## 监控和管理

### 条件单状态
- 条件单下单后会显示在委托订单列表中
- 可以通过"撤销"按钮取消未触发的条件单
- 触发后的条件单会转为普通订单执行

### 建议操作
1. 定期检查条件单状态
2. 根据市场变化调整条件单设置
3. 避免设置过多冲突的条件单
4. 保持账户有足够的可用余额

## 常见问题

**Q: 条件单什么时候会触发？**
A: 当市场价格达到或穿越设定的触发价格时，条件单会自动转为市价单或限价单执行。

**Q: 浮盈条件单的方向为什么与持仓相同？**
A: 浮盈条件单是为了在达到目标盈利时加仓，而不是平仓。如需止盈平仓，请使用标准条件单。

**Q: 条件单失败了怎么办？**
A: 检查账户余额、杠杆设置、价格合理性等，确保参数正确后重新下单。

**Q: 可以同时设置多个条件单吗？**
A: 可以，但要注意避免冲突，合理管理资金和风险。 